@startuml

start

:获取当前用户ID;
:设置视频记录的用户ID为当前用户ID;
:构建视频记录在Redis中的键名;
:将视频记录存储到Redis中;
:获取所有匹配视频记录前缀的键;
:遍历匹配到的键;
:根据键从Redis中获取视频记录的JSON字符串;
:将JSON字符串转换为视频记录对象;
:根据视频记录查询数据库中的视频记录列表;
if (视频记录列表为空？) then (是)
    :将视频记录添加到数据库中;
else (否)
    :更新数据库中的视频记录;
endif
:删除Redis中的视频记录键;

stop

@enduml
